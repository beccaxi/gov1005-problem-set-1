---
title: "Problem Set 1"
author: "Gov 1005 Spring 2020"
date: "2/12/2020"
output: html_document
---
***
**Objectives for this problem set:**

* Students will be able to **distinguish between different types of data** 
* Students will demonstrate an **understanding of the core software** components the course and how they relate to each other
* Students will develop basic **literacy in the grammar of graphics** and basic competencies in **making plots** 





Make sure to read about [how we do problem sets](https://www.davidkane.info/post/2019-08-31-problem-sets-and-exams/) in this class and our [grading rubrics](https://www.davidkane.info/post/2019-07-14-grading-rubrics/).

---

<span style="color: darkblue;"> In each problem set, we aim to show you how **data informs politics and governance** in the modern world. Sometimes the connections will be obvious --- today's problem set uses endorsements data for the 2020 presidential election. But keep an eye out for less obviously "political"" data in the future, like public health data the Chinese government might use to control the coronavirus outbreak, or data on Uber that the New York DOT might use to address traffic questions.</span>

<span style="color: darkblue;"> To set up this pset, you'll need two packages, **tidyverse** (which you should have installed in class), and  **fivethirtyeight**. See the textbook if you need a reminder on how to install and load packages.</span>


<span style="color: darkblue;"> **Fivethirtyeight** gives you a whole database of user-friendly datasets to explore. The website also publishes additional data outside of the package, which you can find [here.](https://data.fivethirtyeight.com/) Today, we're going to use the **endorsements_2020** data (check out the article [here](https://fivethirtyeight.com/features/the-2020-endorsement-race-is-getting-interesting/)).

Start by assigning the endorsements_2020 toa  dataframe so that it's easy to access.) </span>


```{r setup, include=FALSE}
  knitr::opts_chunk$set(echo = TRUE)
  library(tidyverse)
  library(fivethirtyeight)
  endorse <- endorsements_2020
```
### Mad Libs 
```{r get variable types, include = FALSE}
a1 <- class(endorse$position)
a2 <- class(endorse$endorser)
a3 <- class(endorse$points)
```

1.
 
  +  The variable "position" is a `r a1`  class of variable.

  +  The variable "endorser" is a `r a2` class of variable.

  +  The variable "points" is a `r a3`  class of variable. 

```{r count number of mayors, include = FALSE}
  b <- endorse %>% filter(position == "mayor") %>% count()
```

2. The number of mayors in the dataset is `r b`

```{r count number of mayors that have endorsed a candidate, include = FALSE}
  c <- endorse %>% filter(!is.na(endorsee)) %>% filter(position == "mayor") %>% count() # base r solution- the ! tells us "not" and    is.na finds the na's
  c <- endorse %>% drop_na(endorsee)  %>% filter(position == "mayor") %>% count() #tidyverse solution- drops endorsee's observations  for which endorsee is na
```
3. But only `r c` mayors have endorsed a candidate. 

<span style="color: darkblue;"> In your own data science, you should think hard about when it is/isn't appropriate to drop observations for which there is no data. For this problem set, the NA's represent people who haven't yet endorsed a candidate, not missing information. So, we'll use only the observations with an endorsee from now on. (You might want to assign a new name to the object without the NAs)</span>


```{r keep only non-na observations for endorsee, include =FALSE }
  active <- endorse %>% drop_na(endorsee)  
```


```{r who has the most endorsements?, include =FALSE }
  num_endorsements <- active %>% group_by(endorsee) %>% count()
  d <- num_endorsements[which.max(num_endorsements$n), "endorsee"] #Note to instruction staff- is this too hard?
  e <- max(num_endorsements$n) 

```
4. `r d` is the candidate with the most endorsements. This candidate has `r e` endorsements. *(Hint: you might want to look at the which.max function from base r)* 


```{r democratic most endorsements, include =FALSE }
f <- max(active$date)
g <- min(active$date)
```

5. The most recent date for endorsement is `r f`. The earliest endorsement is `r g`. 

```{r female endorsees points, include =FALSE}
h <- active %>% filter(endorsee == "Amy Klobuchar"| endorsee == "Elizabeth Warren") %>% summarize(sum(points))
```

6. Between them, the two female candidates who remain in the race (Amy Klobuchar and Elizabeth Warren) have `r h` endorsement points. (*Learn how fivethirtyeight calculates endorsement points* [here](https://fivethirtyeight.com/methodology/how-our-presidential-endorsement-tracker-works/))

### In your words:
1. In a short paragraph, how would you explain to your grandparents:

  * the difference between r and rstudio 
  * why we use github 
  * what a **filepath** is?

2. Why can you make a bar plot in ggplot with only one variable in the aesthetic mapping when a line graph needs two?

### Put it in Practice 

<span style="color: darkblue;"> Make two different graphs, showing us two interesting observations about the endorsements. You might want to subset the data to only recent endorsements, certain endorsers or endorsees. Use two different geoms (so far, we've covered **geom_point**, **geom_jitter**, **geom_line**, **geom_histogram**, **geom_boxplot**, and **geom_barplot**.) </span>

<span style="color: darkblue;">  We'll learn more about best practices for labeling axes and giving your graph a title soon. [This](http://www.sthda.com/english/wiki/ggplot2-title-main-axis-and-legend-titles) page has some good instructions on how to label your axes and change how they look. For this pset, you'll get credit as long as both your x and y axes have a label and your graph has a title. Write a line of text for each graph telling us, in one sentence, an observation or summary that a reader could take away from your graph.  </span>

<span style="color: darkblue;"> Here's an example graph. Note that we used **ggthemes** and **theme_fivethirtyeight** to make our graph look like fivethirtyeight </span>

```{r example graph 1, include =TRUE, echo = FALSE}
library(ggthemes)
active %>% filter(date > "2018-12-31", (position == "mayor"| position == "governor")) %>% ggplot() + geom_bar(aes(x = endorsee, group = position, fill = position), position= "dodge")  + xlab("Candidate") + ylab("Number of Officials Publicly Endorsing them") + ggtitle("Who Do Mayors and Governors Endorse? \n Public Endorsements for Democratic Nominee since January 2019") +theme_fivethirtyeight() + theme(axis.text.x = element_text(angle = 45, hjust = 1))

```

We think it's interesting that some of the candidates that were most popular with mayors have dropped out of the race, and some of the front-runners (ie, Warren) don't have any endorsements in this dataset. 

 







